(()=>{var e={};e.id=247,e.ids=[247],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},35816:e=>{"use strict";e.exports=require("process")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},15673:e=>{"use strict";e.exports=require("node:events")},69093:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>y,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{POST:()=>c});var a=r(49303),i=r(88716),o=r(60670),n=r(87070),l=r(75571),u=r(90455),d=r(97395),p=r(10306);async function c(e){try{let t=await (0,l.getServerSession)(u.L);if(!t)return n.NextResponse.json({error:"Unauthorized"},{status:401});let{title:r,content:s}=await e.json();if(!r||!s)return n.NextResponse.json({error:"Missing required fields"},{status:400});return await d.db.insert(p.journals).values({userId:parseInt(t.user.id),entryText:`${r}

${s}`}),n.NextResponse.json({message:"Journal entry created successfully"},{status:201})}catch(e){return console.error("Journal entry error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/journal/route",pathname:"/api/journal",filename:"route",bundlePath:"app/api/journal/route"},resolvedPagePath:"D:\\sahedul\\WellBeing\\app\\api\\journal\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:y,staticGenerationAsyncStorage:h,serverHooks:g}=m,x="/api/journal/route";function f(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},90455:(e,t,r)=>{"use strict";r.d(t,{L:()=>u});var s=r(53797),a=r(42023),i=r.n(a),o=r(97395),n=r(10306),l=r(57745);let u={providers:[(0,s.Z)({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;let t=(await o.db.select().from(n.users).where((0,l.eq)(n.users.email,e.email)).limit(1))[0];return t&&await i().compare(e.password,t.passwordHash)?{id:t.userId.toString(),email:t.email,name:t.name}:null}})],session:{strategy:"jwt"},pages:{signIn:"/login"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id),e),session:async({session:e,token:t})=>(t&&(e.user.id=t.id),e)}}},97395:(e,t,r)=>{"use strict";r.d(t,{db:()=>n,x:()=>l});var s=r(7523),a=r(73785),i=r(10306);let o=a.createPool({host:process.env.DB_HOST||"localhost",port:parseInt(process.env.DB_PORT||"3306"),user:process.env.DB_USER||"root",password:process.env.DB_PASSWORD||"",database:process.env.DB_NAME||"wellbeing",connectionLimit:10}),n=(0,s.tS)(o,{schema:i,mode:"default"});async function l(){try{for(let e of[{name:"Dr. Sarah Johnson",specialization:"Anxiety & Depression",email:"sarah.johnson@wellbeing.com",availableDays:"Monday,Wednesday,Friday"},{name:"Dr. Michael Chen",specialization:"Trauma & PTSD",email:"michael.chen@wellbeing.com",availableDays:"Tuesday,Thursday,Saturday"},{name:"Dr. Emily Rodriguez",specialization:"Relationship & Family Therapy",email:"emily.rodriguez@wellbeing.com",availableDays:"Monday,Tuesday,Thursday,Friday"},{name:"Dr. James Wilson",specialization:"Addiction & Recovery",email:"james.wilson@wellbeing.com",availableDays:"Monday,Wednesday,Thursday,Saturday"}])try{await n.insert(i.therapists).values(e)}catch{console.log("Therapist already exists:",e.name)}for(let e of[{mood:"Very Happy",tip:"Share your happiness with others - it's contagious!"},{mood:"Very Happy",tip:"Take a moment to reflect on what brought you joy today"},{mood:"Happy",tip:"Keep up the positive momentum with some light exercise"},{mood:"Happy",tip:"Connect with a friend or family member"},{mood:"Neutral",tip:"Try some gentle movement like stretching or walking"},{mood:"Neutral",tip:"Practice mindfulness or meditation for 5-10 minutes"},{mood:"Sad",tip:"Be gentle with yourself - it's okay to feel sad sometimes"},{mood:"Sad",tip:"Try some deep breathing exercises"},{mood:"Very Sad",tip:"Remember that you're not alone in feeling this way"},{mood:"Very Sad",tip:"Consider speaking with a mental health professional"}])try{await n.insert(i.suggestions).values(e)}catch{console.log("Suggestion already exists for mood:",e.mood)}console.log("Database initialized successfully")}catch(e){console.error("Error initializing database:",e)}}},10306:(e,t,r)=>{"use strict";r.r(t),r.d(t,{appointments:()=>m,journals:()=>p,moodEntries:()=>h,suggestions:()=>y,therapists:()=>c,users:()=>d});var s=r(54640),a=r(51906),i=r(11585),o=r(20412),n=r(33068),l=r(19711),u=r(90292);let d=(0,a.iq)("users",{userId:(0,i.e$)("user_id").primaryKey().autoincrement(),name:(0,o.L7)("name",{length:100}).notNull(),email:(0,o.L7)("email",{length:100}).notNull().unique(),passwordHash:(0,o.L7)("password_hash",{length:255}).notNull(),age:(0,i.e$)("age"),gender:(0,n.MI)("gender",["Male","Female","Other"]).default("Other"),createdAt:(0,l.AB)("created_at").default((0,s.i6)`CURRENT_TIMESTAMP`).notNull()}),p=(0,a.iq)("journals",{journalId:(0,i.e$)("journal_id").primaryKey().autoincrement(),userId:(0,i.e$)("user_id").notNull().references(()=>d.userId,{onDelete:"cascade"}),entryText:(0,u.fL)("entry_text").notNull(),entryDate:(0,l.AB)("entry_date").default((0,s.i6)`CURRENT_TIMESTAMP`).notNull()}),c=(0,a.iq)("therapists",{therapistId:(0,i.e$)("therapist_id").primaryKey().autoincrement(),name:(0,o.L7)("name",{length:100}).notNull(),specialization:(0,o.L7)("specialization",{length:100}).notNull(),email:(0,o.L7)("email",{length:100}).notNull(),availableDays:(0,o.L7)("available_days",{length:100})}),m=(0,a.iq)("appointments",{appointmentId:(0,i.e$)("appointment_id").primaryKey().autoincrement(),userId:(0,i.e$)("user_id").notNull().references(()=>d.userId,{onDelete:"cascade"}),therapistId:(0,i.e$)("therapist_id").notNull().references(()=>c.therapistId,{onDelete:"cascade"}),appointmentDate:(0,l.AB)("appointment_date").notNull(),status:(0,n.MI)("status",["Pending","Confirmed","Cancelled"]).default("Pending")}),y=(0,a.iq)("suggestions",{suggestionId:(0,i.e$)("suggestion_id").primaryKey().autoincrement(),mood:(0,n.MI)("mood",["Very Happy","Happy","Neutral","Sad","Very Sad"]).notNull(),tip:(0,u.fL)("tip").notNull()}),h=(0,a.iq)("mood_entries",{entryId:(0,i.e$)("entry_id").primaryKey().autoincrement(),userId:(0,i.e$)("user_id").notNull().references(()=>d.userId,{onDelete:"cascade"}),mood:(0,n.MI)("mood",["Very Happy","Happy","Neutral","Sad","Very Sad"]).notNull(),moodScore:(0,i.e$)("mood_score").notNull(),notes:(0,u.fL)("notes"),entryDate:(0,l.AB)("entry_date").default((0,s.i6)`CURRENT_TIMESTAMP`).notNull()})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,795,23,790,972],()=>r(69093));module.exports=s})();