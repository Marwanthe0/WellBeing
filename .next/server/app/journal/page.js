(()=>{var e={};e.id=961,e.ids=[961],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},35816:e=>{"use strict";e.exports=require("process")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},15673:e=>{"use strict";e.exports=require("node:events")},12772:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>u}),t(84),t(87393),t(35866);var s=t(23191),a=t(88716),l=t(37922),o=t.n(l),n=t(95231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(r,i);let u=["",{children:["journal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,84)),"D:\\sahedul\\WellBeing\\app\\journal\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,87393)),"D:\\sahedul\\WellBeing\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\sahedul\\WellBeing\\app\\journal\\page.tsx"],c="/journal/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/journal/page",pathname:"/journal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},50760:(e,r,t)=>{Promise.resolve().then(t.bind(t,58655))},58655:(e,r,t)=>{"use strict";t.d(r,{JournalPage:()=>x});var s=t(10326),a=t(17577),l=t(35047),o=t(65160),n=t(76557);let i=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),u=(0,n.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var d=t(6343),c=t(37358);function x({journalEntries:e}){let[r,t]=(0,a.useState)(!1),[n,x]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[b,y]=(0,a.useState)(null),j=(0,l.useRouter)(),f=async e=>{if(e.preventDefault(),n.trim()&&m.trim())try{(await fetch("/api/journal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.trim(),content:m.trim()})})).ok&&(x(""),h(""),t(!1),j.refresh())}catch(e){console.error("Error saving journal entry:",e)}},v=e.filter(e=>e.entryText.toLowerCase().includes(p.toLowerCase())),w=(e,r=30)=>{let t=e.split(" ");return t.length<=r?e:t.slice(0,r).join(" ")+"..."},N=e=>{let r=e.split("\n");return{title:r[0]||"Untitled Entry",content:r.slice(2).join("\n")||e}};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Your Personal Journal"}),s.jsx("p",{className:"text-lg text-gray-600",children:"A safe space to reflect, process, and document your thoughts and feelings"})]}),r?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"New Journal Entry"}),(0,s.jsxs)("form",{onSubmit:f,children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Title"}),s.jsx("input",{type:"text",id:"title",value:n,onChange:e=>x(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Give your entry a title...",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Thoughts"}),s.jsx("textarea",{id:"content",rows:10,value:m,onChange:e=>h(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Write about your day, your feelings, your thoughts... This is your safe space.",required:!0})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Save Entry"}),s.jsx("button",{type:"button",onClick:()=>{t(!1),x(""),h("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors",children:"Cancel"})]})]})]}):s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:(0,s.jsxs)("button",{onClick:()=>t(!0),className:"w-full flex items-center justify-center space-x-2 py-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[s.jsx(i,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Write a new journal entry"})]})}),e.length>0&&s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",value:p,onChange:e=>g(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Search your journal entries..."})]})}),s.jsx("div",{className:"space-y-6",children:0===v.length&&0===e.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center",children:[s.jsx("div",{className:"text-gray-400 text-5xl mb-4",children:s.jsx(d.Z,{className:"h-16 w-16 mx-auto"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Start Your Journal"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Writing can be a powerful tool for mental wellness. Start by sharing what's on your mind today."}),(0,s.jsxs)("button",{onClick:()=>t(!0),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(i,{className:"h-5 w-5 mr-2"}),"Write Your First Entry"]})]}):0===v.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center",children:[s.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDD0D"}),s.jsx("p",{className:"text-gray-600",children:"No entries match your search term."})]}):v.map(e=>{let{title:r,content:t}=N(e.entryText);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(c.Z,{className:"h-4 w-4 mr-1"}),(0,o.Z)(new Date(e.entryDate),"MMM dd, yyyy â€¢ h:mm a")]})]}),s.jsx("div",{className:"text-gray-700 leading-relaxed",children:b===e.journalId?(0,s.jsxs)("div",{children:[s.jsx("div",{className:"whitespace-pre-wrap",children:t}),s.jsx("button",{onClick:()=>y(null),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Show less"})]}):(0,s.jsxs)("div",{children:[s.jsx("div",{className:"whitespace-pre-wrap",children:w(t)}),t.split(" ").length>30&&s.jsx("button",{onClick:()=>y(e.journalId),className:"mt-2 text-blue-600 hover:text-blue-700 font-medium",children:"Read more"})]})})]},e.journalId)})})]})}},37358:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(76557).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},84:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var s=t(19510),a=t(75571),l=t(58585),o=t(90455),n=t(97395),i=t(10306),u=t(57745),d=t(81445);let c=(0,t(68570).createProxy)(String.raw`D:\sahedul\WellBeing\components\JournalPage.tsx#JournalPage`);async function x(){let e=await (0,a.getServerSession)(o.L);e||(0,l.redirect)("/login");let r=await n.db.select().from(i.journals).where((0,u.eq)(i.journals.userId,parseInt(e.user.id))).orderBy((0,d.C)(i.journals.entryDate));return s.jsx(c,{journalEntries:r})}}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,795,23,790,325,344,381],()=>t(12772));module.exports=s})();